<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/estilo_logUser.css">
    <title>Login a la cuenta</title>
    <!-- necesarias para usar el login de googole-->
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <meta name="google-signin-client_id" content="237413284598-91uq2vvtbmr45o4kf8bls0m0i5si4ebb.apps.googleusercontent.com">
    <!-- necesario para usar el login de facebook-->
    <div id="fb-root"></div>
    <script async defer crossorigin="anonymous" src="https://connect.facebook.net/es_LA/sdk.js#xfbml=1&version=v8.0&appId=680663829249628&autoLogAppEvents=1" nonce="p0GW9dmB"></script> 
    
    <!-- <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"> -->
</head>

<body>
    <section class="register-account">
        <div class="signform">
            <div class="left">
                <div>
                    <!-- aca es donde va el logo-->
                </div>
                <div class="headit">
                    <h1>Bienvenido/a</h1>
                </div>
                <div class="form">
                    <form class="login-form">
                        <div>
                            <h4 class="titH4">Email:</h4>
                            <input class="mail" type="email" placeholder="E-mail" required/>
                        </div>
                        <div>
                            <h4 class="titH4">Contraseña:</h4>
                            <input class="pwd" type="password" placeholder="Contraseña" required/>
                        </div>
                    </form>
                    <div>
                        <a href="./html/recover.html">Has olvidado la contraseña?</a>
                        <button class="subbt" type="submit">Ingresar</button>
                        <!-- <input class="subbt" type="submit" value="Ingresar" style="border:none;" /> -->
                    </div>       
                    <!-- <input type="checkbox" id="remember" name="remember"><span class="spnRecordar">Recordar</span> -->
                </div>
            </div>
            <div class="left">
                <a href="./html/register.html" target="_blank" style="float:right;margin-right:35px;font-size: 0.9em;"
                    class="bts-a">¿No tenés cuenta? Registrate ahora!</a>
                <br>
                <p class="optRedes">O inicia sesión con...</p>
                <div class="bts">
                    
                    <!-- Display login status -->
                    <div id="status"></div>                

                    <!-- variante de boton <div class="fb-login-button fblogin social" data-size="small" data-button-type="login_with" data-layout="default" data-auto-logout-link="false" data-use-continue-as="false" data-width="" scope="public_profile,email"></div> -->

                    <fb:login-button class="fblogin social" scope="public_profile,email" onlogin="checkLoginState();">Inicia sesión</fb:login-button>

                    <!-- <a href="#" class="twlogin social"><i class="fa fa-twitter"></i><span>Ingresa desde Twitter</span></a> -->
                    <div class="g-signin2 gplogin social" data-onsuccess="onSignIn"></div>
                </div>
            </div>
        </div>
    </section>
</body>
<!-- script de mi pagina -->
<script src="js/loginUsr.js"></script>
<!-- script de facebook -->
 <script>
    window.fbAsyncInit = function () {
        // FB JavaScript SDK configuration and setup
        FB.init({
            appId: '680663829249628', // FB App ID
            cookie: true,  // enable cookies to allow the server to access the session
            xfbml: true,  // parse social plugins on this page
            version: 'v8.0' // use graph api version 2.8
        });

        // Check whether the user already logged in
        FB.getLoginStatus(function (response) {
            if (response.status === 'connected') {
                //display user data
                getFbUserData();
            }
        });
    };

    // Load the JavaScript SDK asynchronously
    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "https://connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));

    // Facebook login with JavaScript SDK
    function fbLogin() {
        FB.login(function (response) {
            if (response.authResponse) {
                // Get and display the user profile data
                getFbUserData();
            } else {
                document.getElementById('status').innerHTML = 'User cancelled login or did not fully authorize.';
            }
        }, { scope: 'public_profile, email' });
    }

    // Fetch the user profile data from facebook
    function getFbUserData() {
        FB.api('/me', { locale: 'en_US', fields: 'id,first_name,last_name,email,link,gender,locale,picture' },
            function (response) {
                document.getElementById('fbLink').setAttribute("onclick", "fbLogout()");
                document.getElementById('fbLink').innerHTML = 'Logout from Facebook';
                document.getElementById('status').innerHTML = '<p>Thanks for logging in, ' + response.first_name + '!</p>';
                document.getElementById('userData').innerHTML = '<h2>Facebook Profile Details</h2><p><img src="' + response.picture.data.url + '"/></p><p><b>FB ID:</b> ' + response.id + '</p><p><b>Name:</b> ' + response.first_name + ' ' + response.last_name + '</p><p><b>Email:</b> ' + response.email + '</p><p><b>Gender:</b> ' + response.gender + '</p><p><b>FB Profile:</b> <a target="_blank" href="' + response.link + '">click to view profile</a></p>';
            });
    }

    // Logout from facebook
    function fbLogout() {
        FB.logout(function () {
            document.getElementById('fbLink').setAttribute("onclick", "fbLogin()");
            document.getElementById('fbLink').innerHTML = '<img src="images/fb-login-btn.png"/>';
            document.getElementById('userData').innerHTML = '';
            document.getElementById('status').innerHTML = '<p>You have successfully logout from Facebook.</p>';
        });
    }

    function checkLoginState() {
        FB.getLoginStatus(function(response) {
        statusChangeCallback(response);
    });
}
</script>
<!-- vinculando a libreria Jquery-->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<!-- Libreria java scritp de bootstrap -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
    integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
    crossorigin="anonymous"></script> 

</html>